(()=>{var __webpack_modules__={601:(e,t,n)=>{var o=n(537),r=n(645)(o);r.push([e.id,".ez-t-renderer__anchor {\n  /* */\n  position: relative;\n  overflow: visible;\n}\nslot[name=pop]::slotted(*) {\n  min-width: 112px;\n  display: none;\n  position: absolute;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  max-width: calc(100vw - 32px);\n  max-height: calc(100vh - 32px);\n  margin: 0;\n  padding: 0;\n  -webkit-transform: scale(1);\n  -ms-transform: scale(1);\n  transform: scale(1);\n  -webkit-transform-origin: top left;\n  -ms-transform-origin: top left;\n  transform-origin: top left;\n  opacity: 0;\n  overflow: auto;\n  will-change: transform,opacity;\n  z-index: 8;\n  -webkit-transition: opacity 0.03s linear, -webkit-transform 0.12s cubic-bezier(0, 0, 0.2, 1);\n  transition: opacity 0.03s linear, -webkit-transform 0.12s cubic-bezier(0, 0, 0.2, 1);\n  -o-transition: opacity 0.03s linear, transform 0.12s cubic-bezier(0, 0, 0.2, 1);\n  transition: opacity 0.03s linear, transform 0.12s cubic-bezier(0, 0, 0.2, 1);\n  transition: opacity 0.03s linear, transform 0.12s cubic-bezier(0, 0, 0.2, 1), -webkit-transform 0.12s cubic-bezier(0, 0, 0.2, 1);\n  -webkit-box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12);\n  box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12);\n  background-color: #fff;\n  background-color: var(--mdc-theme-surface, #fff);\n  color: #000;\n  color: var(--mdc-theme-on-surface, #000);\n  border-radius: 4px;\n  transform-origin-left: top left;\n  transform-origin-right: top right;\n}\nslot[name=pop].ez-t-renderer__open::slotted(*) {\n  display: inline-block;\n  -webkit-transform: scale(1);\n  -ms-transform: scale(1);\n  transform: scale(1);\n  opacity: 1;\n}\n.ez-t-renderer__backdrop {\n  background: #333;\n  display: none;\n}\n.ez-t-renderer__open .ez-t-renderer__backdrop {\n  display: block;\n}\n","",{version:3,sources:["webpack://./src/components/ez-t-renderer/ez-t-renderer.less"],names:[],mappings:"AAoBA;EAnBE,IAAI;EAqBJ,kBAAA;EACA,iBAAA;AAnBF;AAsBA;EACE,gBAAA;EACA,aAAA;EACA,kBAAA;EACA,8BAAA;EACA,sBAAA;EACA,6BAAA;EACA,8BAAA;EACA,SAAA;EACA,UAAA;EACA,2BAAA;EACA,uBAAA;EACA,mBAAA;EACA,kCAAA;EACA,8BAAA;EACA,0BAAA;EACA,UAAA;EACA,cAAA;EACA,8BAAA;EACA,UAAA;EACA,4FAAA;EACA,oFAAA;EACA,+EAAA;EACA,4EAAA;EACA,gIAAA;EACA,6HAAA;EACA,qHAAA;EACA,sBAAA;EACA,gDAAA;EACA,WAAA;EACA,wCAAA;EACA,kBAAA;EACA,+BAAA;EACA,iCAAA;AApBF;AAsBA;EACE,qBAAA;EACA,2BAAA;EACA,uBAAA;EACA,mBAAA;EACA,UAAA;AApBF;AAsBA;EACE,gBAAA;EACA,aAAA;AApBF;AAsBA;EACE,cAAA;AApBF",sourcesContent:["\n:host{\n\n}\n\n\n\n//.open {\n//  display: inline-block;\n//  -webkit-transform: scale(1);\n//  -ms-transform: scale(1);\n//  transform: scale(1);\n//  opacity: 1;\n//}\n\n\n\n\n\n\n.anchor {\n  /* */\n  position: relative;\n  overflow: visible;\n}\n\nslot[name=pop]::slotted(*) {\n  min-width: 112px;\n  display: none;\n  position: absolute;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  max-width: calc(100vw - 32px);\n  max-height: calc(100vh - 32px);\n  margin: 0;\n  padding: 0;\n  -webkit-transform: scale(1);\n  -ms-transform: scale(1);\n  transform: scale(1);\n  -webkit-transform-origin: top left;\n  -ms-transform-origin: top left;\n  transform-origin: top left;\n  opacity: 0;\n  overflow: auto;\n  will-change: transform,opacity;\n  z-index: 8;\n  -webkit-transition: opacity .03s linear,-webkit-transform .12s cubic-bezier(0,0,.2,1);\n  transition: opacity .03s linear,-webkit-transform .12s cubic-bezier(0,0,.2,1);\n  -o-transition: opacity .03s linear,transform .12s cubic-bezier(0,0,.2,1);\n  transition: opacity .03s linear,transform .12s cubic-bezier(0,0,.2,1);\n  transition: opacity .03s linear,transform .12s cubic-bezier(0,0,.2,1),-webkit-transform .12s cubic-bezier(0,0,.2,1);\n  -webkit-box-shadow: 0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);\n  box-shadow: 0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);\n  background-color: #fff;\n  background-color: var(--mdc-theme-surface,#fff);\n  color: #000;\n  color: var(--mdc-theme-on-surface,#000);\n  border-radius: 4px;\n  transform-origin-left: top left;\n  transform-origin-right: top right;\n}\nslot[name=pop].open::slotted(*) {\n  display: inline-block;\n  -webkit-transform: scale(1);\n  -ms-transform: scale(1);\n  transform: scale(1);\n  opacity: 1;\n}\n.backdrop{\n  background: #333;\n  display: none;\n}\n.open .backdrop{\n  display: block;\n}\n"],sourceRoot:""}]),r.locals={anchor:"ez-t-renderer__anchor",open:"ez-t-renderer__open",backdrop:"ez-t-renderer__backdrop"},r=new Proxy(r,{get:function(e,t,n){return t in e?e[t]:e.locals&&t in e.locals?e.locals[t]:Reflect.get(...arguments)}}),e.exports=r},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(i[c]=!0)}for(var l=0;l<e.length;l++){var A=[].concat(e[l]);o&&i[A[0]]||(void 0!==s&&(void 0===A[5]||(A[1]="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {").concat(A[1],"}")),A[5]=s),n&&(A[2]?(A[1]="@media ".concat(A[2]," {").concat(A[1],"}"),A[2]=n):A[2]=n),r&&(A[4]?(A[1]="@supports (".concat(A[4],") {").concat(A[1],"}"),A[4]=r):A[4]="".concat(r)),t.push(A))}},t}},537:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),s="/*# ".concat(r," */"),i=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(i).concat([s]).join("\n")}return[t].join("\n")}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}var __webpack_exports__={};(()=>{"use strict";var exports=__webpack_exports__,__webpack_unused_export__;__webpack_unused_export__={value:!0};const style=__webpack_require__(601),ELEMENT_NODE=1,DOCUMENT_FRAGMENT_NODE=11,TEXT_NODE=3,COMMENT_NODE=8;var LOOP_CONDITION_STATEMENT,DOM_RENDER_ACTION_TYPE;!function(e){e[e.CONTINUE=0]="CONTINUE",e[e.BREAK=1]="BREAK",e[e.RETURN=2]="RETURN",e[e.NOTHING=3]="NOTHING"}(LOOP_CONDITION_STATEMENT||(LOOP_CONDITION_STATEMENT={})),function(e){e[e.REPLACE=0]="REPLACE",e[e.REORDER=1]="REORDER",e[e.ATTRS=2]="ATTRS",e[e.TEXT=3]="TEXT"}(DOM_RENDER_ACTION_TYPE||(DOM_RENDER_ACTION_TYPE={}));class DirtyableValue{constructor(e,t){this._dirty=!1,this._pathKey="",this._value=e,this._pathKey=t}get value(){return this._value}set value(e){this._dirty=!0,this._value=e}get isDirty(){return this._dirty}reset(){this._dirty=!1}toString(){return this._value}valueOf(){return this._value}}function ___lambda(e,t={},n=null){return n&&(t=new Proxy(t,{has:()=>!0,get:(e,t,n)=>(console.log(t,t in e),Reflect.get(e,t,n))})),new Function(`with(this) {\n   try {\n    return ${e};\n   } catch(e) {\n   }\n  }`).call(t)}const lambda=function(){const e={};return function(t){let n=e[t];return n||(n=new Function("ctx",`with(ctx) { return ${t};}`),e[t]=n),n}}(),stylesheet=new CSSStyleSheet,slice=Array.prototype.slice;function walk(e,t){"length"in e||(e=[e]),e=slice.call(e);for(;e.length;){const n=e.shift();n.normalize();const o=t(n);if(o!==LOOP_CONDITION_STATEMENT.CONTINUE){if(o===LOOP_CONDITION_STATEMENT.BREAK)break;if(o===LOOP_CONDITION_STATEMENT.RETURN)return;n.childNodes&&n.childNodes.length&&(e=slice.call(n.childNodes).concat(e))}}}function compileWalker(e,t){"length"in e||(e=[e]),e=slice.call(e);for(;e.length;){const n=e.shift();n.normalize(),t(n),n.childNodes&&n.childNodes.length&&(e=slice.call(n.childNodes).concat(e))}}function watchDom(e,t){const n=[],o=new MutationObserver((function(e,t){console.log(e,t)}));o.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,characterDataOldValue:!0,characterData:!0});try{walk(e.childNodes,t)}catch(e){}finally{o.takeRecords().forEach((e=>n.push(e))),o.disconnect()}}function subStrAtPos(e,t,n){const o=[];for(let r=0;r<t;r++){const t=e[n+r];t&&o.push(t)}return o.join("")}function extractVars(e,t="{{",n="}}"){let o=0;const r=[];do{if(subStrAtPos(e,t.length,o)==t)for(let s=o+1;s<=e.length-n.length;s++)if(subStrAtPos(e,n.length,s)==n){r.push(e.slice(o+t.length,s)),o=s+1;break}}while(++o<=e.length-t.length);return r}function bindFunctionScope(ctx,fn){return function(){return eval(fn.toString())}.call(ctx)}const StateHandle={has:()=>!0,get(e,t,n){return"startRecordExpressionVars"===t?(this.recordExpressionVars=[],()=>{}):"stopRecordExpressionVars"===t?()=>{const e=[...this.recordExpressionVars];try{return e}finally{this.recordExpressionVars.length=0,delete this.recordExpressionVars}}:(Object.prototype.hasOwnProperty.call(e,t)&&this.recordExpressionVars&&(this.recordExpressionVars.push(t),console.log("__state get",t,t in e)),Reflect.get(e,t,n))},set(e,t,n,o){let r=n;return n&&!Array.isArray(n)&&"object"==typeof n&&(r=new StateProxy(n)),n&&"function"==typeof n&&(r=bindFunctionScope(e,n)),Reflect.set(e,t,r,o)},deleteProperty:(e,t)=>Reflect.deleteProperty(e,t),ownKeys:e=>Reflect.ownKeys(e)};class StateProxy{constructor(e){return new Proxy(e,StateHandle)}}const loopNestedObj=e=>(Object.entries(e).forEach((([t,n])=>{n&&!Array.isArray(n)&&"object"==typeof n?e[t]=loopNestedObj(n):console.log(t,n)})),new StateProxy(e));class EzTRenderer extends HTMLElement{constructor(){super(),this.beforeCloseHooks=[],this.afterCloseHooks=[],this.beforeActiveTabHooks=[],this.afterActiveTabHooks=[],this.__state=new StateProxy({}),this.varReflectMap={},this.varExpressionObj={},this.expressionNodeMap=new WeakMap,this.nodePositionMap=new WeakMap,this.rendererNodeObj={},this.userStateScope={},this.bindScopeFunction={},this.compile=e=>{if("SCRIPT"==e.nodeName)return;if(e.nodeType===COMMENT_NODE||e.nodeType===DOCUMENT_FRAGMENT_NODE)return;if(e.nodeType===TEXT_NODE){const t=e,n=t.wholeText.replace(/\{\{/gi,"${").replace(/\}\}/gi,"}");return void this.bindTextNodeAction("`"+n+"`",t)}const t=e.getAttributeNames();console.log("attrs",t);const n=t.find((e=>e.startsWith(":each-"))),o=t.find((e=>e.startsWith(":if-")));if(Boolean(o),Boolean(n)){const t=e.getAttribute(n),o=t.replace(":each-","");this.bindForLoopNodeAction(e,t,o)}for(let n=0;n<t.length;n++){const o=e.getAttributeNode(t[n]),r=o.name,s=o.value;if(this.getInternalKey(r.substring(1)),r.startsWith(":if-")){const t=`${r.substring(4)} === ${s}`;console.log("[if]",t),this.bindIfNodeAction(e,t)}if(r.startsWith(":")&&(console.log("[attr]",r,s),this.bindAttrNodeAction(e,s,s)),r.startsWith("@")){const t=r.substring(1);console.log("[event]",r,s),e.addEventListener(t,(e=>{this.__state[s](e)}))}}},this.check=e=>{if("SCRIPT"==e.nodeName)return;if(e.nodeType===COMMENT_NODE||e.nodeType===DOCUMENT_FRAGMENT_NODE)return;if(e.nodeType===TEXT_NODE){const t=e,n=t.wholeText.replace(/\{\{/gi,"${").replace(/\}\}/gi,"}");return void this.bindCalcNodeAction("`"+n+"`",t,((e,t)=>{const n=e(this.__state);t.textContent=n}))}const t=e.getAttributeNames();console.log("attrs",t);const n=t.find((e=>e.startsWith(":each-")));if(Boolean(n)){const t=e.getAttribute(n),o=n.replace(":each-","");return this.bindForLoopNodeAction(e,t,o),LOOP_CONDITION_STATEMENT.CONTINUE}for(let n=0;n<t.length;n++){const o=e.getAttributeNode(t[n]),r=o.name,s=o.value,i=this.getInternalKey(r.substring(1));if(r.startsWith(":if-")){const t=`${r.substring(4)} === ${s}`;console.log("[if]",t),this.bindCalcNodeAction(t,e,((e,t)=>{const n=e(this.__state);console.log(t),n?this.restoreRemoveNode(t):this.removeNode(t)}))}else if(r.startsWith(":")&&(console.log("[attr]",r,s),this.bindCalcNodeAction(s,e,(t=>{const n=t(this.__state);e.setAttribute(i,n)}))),r.startsWith("@")){const t=r.substring(1);console.log("[event]",r,s),e.addEventListener(t,(e=>{this.__state[s](e)}))}}return LOOP_CONDITION_STATEMENT.NOTHING};const e=this.attachShadow({mode:"open"});e.adoptedStyleSheets=[stylesheet],e.innerHTML="\n       <slot></slot>\n    ".replace(/[\s\n]*\n[\s\n]*/g,"")}connectedCallback(){0==stylesheet.cssRules.length&&stylesheet.replaceSync(style.toString()),this.cacheIfTagDomFragment=document.createDocumentFragment(),this.cacheLoopTagDomFragment=document.createDocumentFragment(),this.dispatchEvent(new CustomEvent("created",{detail:this})),console.log(22222),compileWalker(this.childNodes,this.compile),this.dispatchEvent(new CustomEvent("mounted",{detail:this}))}render(){}getInternalKey(e){return e}makeStateReflectable(e,t=""){const n=this;this.userStateScope=e,Object.entries(e).forEach((([o,r])=>{const s=`${t?`${t}.`:""}${o}`;if(console.log("pathKey",s),r&&!Array.isArray(r)&&"object"==typeof r)return void n.makeStateReflectable(r,s);const i=this.getInternalKey(s);n.__state[i]=r,Object.defineProperty(e,o,{get:()=>(console.log("[state] [GET]",i,n.__state[i]),n.__state[i]),set(t){if(console.log("[state] [SET]",i,t),t&&!Array.isArray(r)&&"object"==typeof t)return void n.makeStateReflectable(t,s);"function"==typeof t&&(t=bindFunctionScope(e,t));const o=n.__state[i];n.__state[i]=t;const a=n.varExpressionObj[i];a&&a.forEach((e=>{n.expressionNodeMap.get(e)(i,o,t)}))}})}))}setState(e){this.makeStateReflectable(e),this.render()}removeNode(e){const t=Array.from(e.parentNode.children).indexOf(e);this.nodePositionMap.set(e,{parent:e.parentElement,index:t}),this.cacheIfTagDomFragment.appendChild(e)}restoreRemoveNode(e){const t=this.nodePositionMap.get(e);if(!t)return;const{parent:n,index:o}=t,r=n.children[o];r?n.insertBefore(e,r):n.appendChild(e)}bindCalcNodeAction(e,t,n){const o=lambda(e);this.__state.startRecordExpressionVars(),o(this.__state),this.__state.stopRecordExpressionVars().forEach((e=>{this.varExpressionObj[e]||(this.varExpressionObj[e]=new Set),this.varExpressionObj[e].add(t)})),this.expressionNodeMap.set(t,n.bind(null,o,t))}bindAttrNodeAction(e,t,n){const o=lambda(n);this.__state.startRecordExpressionVars(),o(this.__state),this.__state.stopRecordExpressionVars().forEach((t=>{this.varExpressionObj[t]||(this.varExpressionObj[t]=new Set),this.varExpressionObj[t].add(e)})),this.expressionNodeMap.set(e,(()=>{const n=o(Object.assign(Object.assign({},this.__state),e.compileContext));e.setAttribute(t,n)}))}bindIfNodeAction(e,t){const n=lambda(t);this.__state.startRecordExpressionVars(),n(this.__state),this.__state.stopRecordExpressionVars().forEach((t=>{this.varExpressionObj[t]||(this.varExpressionObj[t]=new Set),this.varExpressionObj[t].add(e)})),this.expressionNodeMap.set(e,(()=>{n(this.__state)?this.restoreRemoveNode(e):this.removeNode(e)}))}bindTextNodeAction(e,t){const n=lambda(e);this.__state.startRecordExpressionVars();const o=n(this.__state);this.__state.stopRecordExpressionVars().forEach((e=>{this.varExpressionObj[e]||(this.varExpressionObj[e]=new Set),this.varExpressionObj[e].add(t)})),this.expressionNodeMap.set(t,(()=>{const e=n(this.__state);t.textContent=e})),t.textContent=o}bindForLoopNodeAction(e,t,n){const o=e.previousSibling,r=e.nextSibling;this.varExpressionObj[t]||(this.varExpressionObj[t]=new Set);const s={begin:o,end:r,forNode:e,varKeyPath:t};this.varExpressionObj[t].add(s),this.expressionNodeMap.set(s,(e=>{const{begin:t,end:o,forNode:r,varKeyPath:s}=e;let i=t.nextSibling;for(;i&&i!=o;){const e=i.nextSibling;i.remove(),i=e}this.__state[s].map(((e,t)=>{const s=r.cloneNode(!0);Object.defineProperty(s,"compileContext",{value:{[n]:{item:e,index:t}},configurable:!1,enumerable:!1,writable:!1}),o.parentNode.insertBefore(s,o)}))}).bind(null,s)),this.cacheLoopTagDomFragment.appendChild(e)}bindStateFunction(fn){return function(){return eval(fn.toString())}.call(this.__state)}disconnectedCallback(){}static get observedAttributes(){return[]}attributeChangedCallback(e,t,n){}adoptedCallback(){}}customElements.define("ez-t-render",EzTRenderer)})()})();
//# sourceMappingURL=ez-t-renderer.js.map